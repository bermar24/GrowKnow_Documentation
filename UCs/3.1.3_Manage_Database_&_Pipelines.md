# 1 Use-Case Name
Manage Database & Pipelines

## 1.1 Brief Description
An administrator can configure, create, run, monitor and maintain data pipelines and the application database.

# 2 Flow of Events
## 2.1 Basic Flow
To be defined.

### 2.1.1 Activity Diagram
To be defined.
[Manage Database \& Pipelines Activity Diagram](../Diagrams/Data_Base_Diagram.png)

### 2.1.2 Mock-up
To be defined.
[Manage Database \& Pipelines Mock-up](#)

### 2.1.3 Narrative
```gherkin
Feature: Manage Supabase database

  As an administrator
  I want to apply schema migrations, manage backups, and configure access on the Supabase project
  So that the production database remains consistent, secure and recoverable.

  Background:
    Given an administrator exists and is authenticated

  Scenario: Apply schema migrations successfully
    When the administrator applies schema migrations
    Then the database schema is up to date

  Scenario: Create and restore a database backup
    When the administrator creates a database backup
    Then a backup file is stored

    When the administrator restores the database from the latest backup
    Then the restore operation completes successfully

  Scenario: Configure database access for a team member
    Given a user "db_maintainer" exists
    When the administrator grants the user database-admin access
    Then the user "db_maintainer" has elevated database permissions

  Scenario: Run, monitor and verify data pipeline
    When the administrator starts the data pipeline run named "daily_ingest"
    Then the pipeline run completes with status "SUCCESS"
    And pipeline run logs contain the text "processed" and "completed"

  Scenario: Handle migration failure gracefully
    Given a migration error is simulated
    When the administrator applies schema migrations
    Then the system reports a migration failure
    And an alert is recorded for administrator review

  Scenario: Backup failure is reported and retried
    Given the backup process is simulated to fail
    When the administrator creates a database backup
    Then the system records the backup failure and schedules a retry
```
This Narrative is implemented in a [seperate document](https://github.com/bermar24/growknow/blob/main/features/steps/database_pipelines_steps.py).

## 2.2 Alternative Flows
(n/a)

# 3 Special Requirements
(n/a)

# 4 Preconditions
(n/a)
# 5 Postconditions
(n/a)

# 6 Extension Points
(n/a)